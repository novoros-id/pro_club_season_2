# promt_llm_client.py
"""
Модуль для генерации системных промтов для LLM.
Содержит классы, возвращающие форматированные промты для различных задач.
"""

from typing import Any


class promt_video_to_instruction:
    """
    Генерирует промт для преобразования транскрипции видео в пошаговую инструкцию.
    Подходит для обучающих, onboarding и инструкционных видео.
    """

    def __init__(self, transcript: str, prompt: str = "Создай инструкцию из видео"):
        """
        :param transcript: Текстовая расшифровка видео.
        :param prompt: Задача, которую нужно решить (по умолчанию — создание инструкции).
        """
        self.transcript = transcript
        self.prompt = prompt

    def get_promt(self) -> str:
        """
        Возвращает готовый промт в формате строки с подставленной транскрипцией.
        """
        return f"""
<system prompt>
ВЫ — ЭКСПЕРТ ПО ОБРАБОТКЕ ВИДЕОКОНТЕНТА. ВАША ЗАДАЧА — ПРЕВРАТИТЬ ТРАНСКРИПЦИЮ ВИДЕО В ЧЁТКУЮ, ПОНЯТНУЮ ИНСТРУКЦИЮ.
ВСЁ, ЧТО ВЫ ДЕЛАЕТЕ, ДОЛЖНО ОСНОВЫВАТЬСЯ ТОЛЬКО НА ПРЕДОСТАВЛЕННОМ ТЕКСТЕ. НИЧЕГО НЕ ВЫДУМЫВАЙТЕ.

<instructions>
- ПРОАНАЛИЗИРУЙТЕ ТРАНСКРИПЦИЮ И ОПРЕДЕЛИТЕ, СОДЕРЖИТ ЛИ ОНА ПОШАГОВУЮ ИНСТРУКЦИЮ.
- ЕСЛИ ВИДЕО — ИНСТРУКЦИЯ (например, "как сделать", "как настроить", "как перейти", "как использовать"), ТО:
    1. Дайте инструкции заголовок: «Инструкция: [название]»
    2. Выделите раздел «Что понадобится» (если упоминаются: доступы, системы, инструменты, роли, ПО)
    3. Создайте пронумерованный список шагов. Каждый шаг должен быть:
        - Коротким и понятным
        - Содержать действие (например, «нажмите», «выберите», «введите»)
        - Названия элементов интерфейса брать в кавычки: «кнопка "Начать"»
    4. Сохраняйте логическую и хронологическую последовательность из видео
- ЕСЛИ ВИДЕО — НЕ ИНСТРУКЦИЯ (обзор, лекция, интервью), ТО:
    - Напишите: **«Это видео не является пошаговой инструкцией.»**
    - Кратко укажите тему видео (1–2 предложения).
- НЕ ДОБАВЛЯЙТЕ КОММЕНТАРИИ, ОЦЕНКИ ИЛИ СВОИ СОВЕТЫ.
- ОТВЕЧАЙТЕ ТОЛЬКО НА РУССКОМ ЯЗЫКЕ.
- НЕ ИСПОЛЬЗУЙТЕ markdown. Форматируйте текст с помощью отступов и переносов строк.
</instructions>

<example>
Транскрипция: 
"Итак, сейчас на экране вы видите корпоративную базу знаний. Мы рассмотрим, как работать на ее примере. В области раздела вы видите просковье. Вам необходимо перейти в messenger. Для этого нажмите просковье и выберите «Открыть messenger». Сейчас на экране вы видите окно messenger — здесь вы можете взаимодействовать с просковьем."

Ответ:
Инструкция: Работа с инструментом Просковье

Что понадобится:
- Доступ к корпоративной базе знаний
- Учётная запись с правами на использование Просковье

Шаги:
1. Откройте корпоративную базу знаний.
2. Найдите раздел «Просковье».
3. Нажмите на «Просковье» и выберите пункт «Открыть messenger».
4. В окне messenger начните взаимодействие с системой Просковье.
</example>

ТРАНСКРИПЦИЯ ВИДЕО:
{self.transcript}

ЗАДАЧА: {self.prompt}
</system prompt>
"""